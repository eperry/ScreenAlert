# Pre-Commit Chat Export

**Date:** 2025-08-15
**Time:** 12:12:32
**Branch:** main
**Previous Commit:** 950744d04695a5a070b2f43eed6e4e07cb8055aa
**Trigger:** Pre-commit hook

## Commit Context

**Files Being Committed:**
- build_nuitka.py
- create_selfsigned_cert.py
- test-cert.pfx

**Staged Changes Summary:**
```
 build_nuitka.py           |  39 ++++++++++--
 create_selfsigned_cert.py | 154 ++++++++++++++++++++++++++++++++++++++++++++++
 test-cert.pfx             | Bin 0 -> 2626 bytes
 3 files changed, 188 insertions(+), 5 deletions(-)
```

**Change Details:**
```diff
diff --git a/build_nuitka.py b/build_nuitka.py
index 01611d4..f9b9f65 100644
--- a/build_nuitka.py
+++ b/build_nuitka.py
@@ -41,13 +41,24 @@ def sign_executable_if_possible(exe_path):
     # Find signtool
     signtool = find_signtool()
     if not signtool:
-        return False
+        print("[SIGN] signtool not found, attempting self-signed certificate...")
+        try:
+            # Try to use self-signed certificate approach
+            import importlib.util
+            spec = importlib.util.spec_from_file_location("create_selfsigned_cert", "create_selfsigned_cert.py")
+            cert_module = importlib.util.module_from_spec(spec)
+            spec.loader.exec_module(cert_module)
+            return cert_module.sign_with_self_signed(exe_path)
+        except Exception as e:
+            print(f"[SIGN] Self-signed certificate failed: {e}")
+            return False
     
     # Look for certificate files
     cert_files = [
         "ScreenAlert-Certificate.pfx",
-        "certificate.pfx",
-        "code-signing.pfx"
+        "certificate.pfx", 
+        "code-signing.pfx",
+        "ScreenAlert-SelfSigned.pfx"  # Add self-signed option
     ]
     
     cert_path = None
@@ -67,8 +78,24 @@ def sign_executable_if_possible(exe_path):
             with open(cert_path, "wb") as f:
                 f.write(base64.b64decode(cert_base64))
     
+    # If no certificate found, try to create self-signed
     if not cert_path:
-        return False
+        print("[SIGN] No certificate found, creating self-signed certificate...")
+        try:
+            import importlib.util
+            spec = importlib.util.spec_from_file_location("create_selfsigned_cert", "create_selfsigned_cert.py")
+            cert_module = importlib.util.module_from_spec(spec)
+            spec.loader.exec_module(cert_module)
+            
+            # Create self-signed certificate
+            self_signed_path = "ScreenAlert-SelfSigned.pfx"
+            if cert_module.create_self_signed_certificate(output_pfx=self_signed_path):
+                cert_path = self_signed_path
... (truncated, showing first 50 lines)
```

## VS Code Chat Data

**No recent chat data found.**


## Session Notes

*This export was automatically generated during the pre-commit process.*

To add manual notes about this development session:
1. Edit this file to add implementation details
2. Include any important decisions made or issues encountered
3. Document any architectural changes or new features

## Development Context

**Working Directory:** /c/Users/Ed/OneDrive/Documents/Development/ScreenAlert
**Git Status at Export:**
```
M  build_nuitka.py
A  create_selfsigned_cert.py
A  test-cert.pfx
?? docs/copilot-chats/2025-08-15_12-12-31_pre-commit-python-changes.md
```

---
*Auto-generated by pre-commit hook*
